<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of selectFeaturesBySelectionMap</title>
  <meta name="keywords" content="selectFeaturesBySelectionMap">
  <meta name="description" content="Apply a featureSelection map that is stored in a dataset to this dataset.">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">easyupMVPA</a> &gt; selectFeaturesBySelectionMap.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for easyupMVPA&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>selectFeaturesBySelectionMap
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>Apply a featureSelection map that is stored in a dataset to this dataset.</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function [dataset, data2D] = selectFeaturesBySelectionMap(dataset) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Apply a featureSelection map that is stored in a dataset to this dataset. 

 Author: Maurice Hollmann
 Date  : 08/10

 [dataset, data2D] = selectFeaturesBySelectionMap(dataset)

 Description:
 Lowlevel function for extracting training data from 
  (1) a 4D data matrix and a given 3D selection map (for dataset4D)
 or from 
  (2)a 2D matrix and a featureSelectionMap1D (for dataset2D).

 This Function uses the featureSelection info of the actual dataset! 
 If dataset.featureSelectionMap3D or dataset.featureSelectionMap1D is not set it returns an error!

 The returned data is 2D and already excluded features which are zero in selectionMap. That means
 the returned matrix has not the same number of elements as input data. For projecting back into
 original feature space one needs to set the elements according to the featureMap which is still 
 in original feature space:  arrayInOrigSpace(featureMap&gt;0)= data2D.

 Parameters:
   dataset     - the dataset from that features should be selected

 Returns:
   dataset     - the datset with included 'featureSelectionMap3D' or 'featureSelectionMap1D'
   data2D      - the selected features as 2D matrix, the backward mapping can be done using the selectionMap

 Comments:</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="doLeaveOneOutCrossValidation_SVM.html" class="code" title="function [dataset, resultStruct, avgWeights] = doLeaveOneOutCrossValidation_SVM(dataset, dataSplitter, svmType, kernelMode, costParam, paramStruct)">doLeaveOneOutCrossValidation_SVM</a>	Implements a Leave One Out Cross Validation (LOOCV) using a Support Vector Machine Classifier (parallel execution).</li><li><a href="doRecursiveFeatureElemination_SVM.html" class="code" title="function [dataset, resultStruct, avg_rfe_weightMap, avg_rfe_featureSelectionMap, rfe_weightMaps, rfe_featureSelectionMaps] = doRecursiveFeatureElemination_SVM(dataset, nmbIterations, thresholdPercentOfFeaturesOut, dataSplitter, svmType, kernelMode, costParam, paramStruct)">doRecursiveFeatureElemination_SVM</a>	Recursively removes features according to SVM classification weights (parallel execution).</li><li><a href="doRecursiveFeatureElemination_SVM_nestedLOOCV.html" class="code" title="function [dataset, resultStruct, avg_rfe_weightMap, avg_rfe_featureSelectionMap, rfe_weightMaps, rfe_featureSelectionMaps] = doRecursiveFeatureElemination_SVM_nestedLOOCV(dataset, nmbIterations, thresholdPercentOfFeaturesOut, nmbSplitsLOOCV, dataSplitter, kernelMode, costParam, paramStruct)">doRecursiveFeatureElemination_SVM_nestedLOOCV</a>	! DEPRECATED ! Recursively removes features according to SVM classification weights from LOOCV.</li><li><a href="doRecursiveFeatureElemination_bootStrap_SVM.html" class="code" title="function [dataset, resultStruct] = doRecursiveFeatureElemination_bootStrap_SVM(dataset, nmbBootSteps)">doRecursiveFeatureElemination_bootStrap_SVM</a>	[DO NOT USE: UNDER DEVELOPEMENT!] Recursively removes features according to SVM classification weights obtained by bootstrapping.</li><li><a href="doRecursiveFeatureElemination_bootstrapping_SVM.html" class="code" title="function [dataset, resultStruct, avg_rfe_weightMap, avg_rfe_featureSelectionMap, rfe_weightMaps, rfe_featureSelectionMaps] = doRecursiveFeatureElemination_bootstrapping_SVM(dataset, nmbBootstrapIterations, nmbIterations, thresholdPercentOfFeaturesOut, dataSplitter, kernelMode, costParam, paramStruct)">doRecursiveFeatureElemination_bootstrapping_SVM</a>	[DO NOT USE: UNDER DEVELOPEMENT!] Recursively removes features according to SVM classification weights (parallel execution).</li><li><a href="predict_RVM.html" class="code" title="function [resultStruct, probEstimates] = predict_RVM(dataset, rvmModel)">predict_RVM</a>	(UNDER CONSTRUCTION) Predicts classes of the samples in dataset using the given SVM-model.</li><li><a href="predict_SVM.html" class="code" title="function [resultStruct, probEstimates] = predict_SVM(dataset, svmModel)">predict_SVM</a>	Predicts classes of the samples in dataset using the given SVM-model.</li><li><a href="train_RVM.html" class="code" title="function [rvmModel, weights] = train_RVM(dataset, kernelType, kernelWidth, paramStruct)">train_RVM</a>	(UNDER CONSTRUCTION) Simple training of a dataset based on the given dataset using a Relevance Vector Machine (RVM).</li><li><a href="train_SVM.html" class="code" title="function [svmModel, weights] = train_SVM(dataset, svmType, kernelMode, costParam, paramStruct)">train_SVM</a>	Simple training of a dataset based on the given dataset using a Support Vector Machine (SVM).</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% Apply a featureSelection map that is stored in a dataset to this dataset.</span>
0002 <span class="comment">%</span>
0003 <span class="comment">% Author: Maurice Hollmann</span>
0004 <span class="comment">% Date  : 08/10</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% [dataset, data2D] = selectFeaturesBySelectionMap(dataset)</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% Description:</span>
0009 <span class="comment">% Lowlevel function for extracting training data from</span>
0010 <span class="comment">%  (1) a 4D data matrix and a given 3D selection map (for dataset4D)</span>
0011 <span class="comment">% or from</span>
0012 <span class="comment">%  (2)a 2D matrix and a featureSelectionMap1D (for dataset2D).</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% This Function uses the featureSelection info of the actual dataset!</span>
0015 <span class="comment">% If dataset.featureSelectionMap3D or dataset.featureSelectionMap1D is not set it returns an error!</span>
0016 <span class="comment">%</span>
0017 <span class="comment">% The returned data is 2D and already excluded features which are zero in selectionMap. That means</span>
0018 <span class="comment">% the returned matrix has not the same number of elements as input data. For projecting back into</span>
0019 <span class="comment">% original feature space one needs to set the elements according to the featureMap which is still</span>
0020 <span class="comment">% in original feature space:  arrayInOrigSpace(featureMap&gt;0)= data2D.</span>
0021 <span class="comment">%</span>
0022 <span class="comment">% Parameters:</span>
0023 <span class="comment">%   dataset     - the dataset from that features should be selected</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% Returns:</span>
0026 <span class="comment">%   dataset     - the datset with included 'featureSelectionMap3D' or 'featureSelectionMap1D'</span>
0027 <span class="comment">%   data2D      - the selected features as 2D matrix, the backward mapping can be done using the selectionMap</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% Comments:</span>
0030 <span class="comment">%</span>
0031 <a name="_sub0" href="#_subfunctions" class="code">function [dataset, data2D] = selectFeaturesBySelectionMap(dataset)</a>
0032   
0033   <span class="keyword">if</span>(dataset.is4D)
0034     
0035      <span class="keyword">if</span>(~isfield(dataset,<span class="string">'featureSelectionMap'</span>) || isempty(dataset.featureSelectionMap))
0036       error(<span class="string">'The field dataset.featureSelectionMap is not set. It is not possible to select features without this field.'</span>);
0037      <span class="keyword">end</span>
0038      
0039      numelFselMap = numel(dataset.featureSelectionMap(dataset.featureSelectionMap &gt; 0));
0040      
0041      <span class="comment">%more memory less computing time...</span>
0042      selMap   = repmat(dataset.featureSelectionMap, [1, 1, 1, size(dataset.data,4)]);
0043      data2D   = double(reshape(dataset.data(selMap&gt;0), numelFselMap, size(dataset.data,4))');
0044      
0045      <span class="comment">%less memory more computing time</span>
0046 <span class="comment">%      data2D   = zeros(size(dataset.data,4), numelFselMap);</span>
0047 <span class="comment">%      for i=1:size(dataset.data,4)</span>
0048 <span class="comment">%        tmp            = dataset.data(:,:,:,i);</span>
0049 <span class="comment">%        data2D(i,:)    = tmp(dataset.featureSelectionMap&gt;0);</span>
0050 <span class="comment">%      end</span>
0051      
0052   <span class="keyword">elseif</span>(dataset.is2D)
0053     
0054      <span class="keyword">if</span>(~isfield(dataset,<span class="string">'featureSelectionMap'</span>) || isempty(dataset.featureSelectionMap))
0055       error(<span class="string">'The field dataset.featureSelectionMap is not set. It is not possible to select features without this field.'</span>);
0056      <span class="keyword">end</span>
0057      
0058      numelFselMap = numel(dataset.featureSelectionMap(dataset.featureSelectionMap &gt; 0));
0059 
0060      <span class="comment">%more memory less computing time...</span>
0061      selMap   = repmat(dataset.featureSelectionMap, [1, 1, size(dataset.data,2)]);
0062      data2D   = double(reshape(dataset.data(selMap&gt;0), numelFselMap, size(dataset.data,2))');
0063     
0064      <span class="comment">%less memory more computing time</span>
0065 <span class="comment">%      data2D   = zeros(size(dataset.data, 2), numel(find(dataset.featureSelectionMap &gt; 0)));</span>
0066 <span class="comment">%      for i=1:size(dataset.data,2)</span>
0067 <span class="comment">%        tmp            = dataset.data(:,i);</span>
0068 <span class="comment">%        data2D(i,:)    = tmp(dataset.featureSelectionMap&gt;0);</span>
0069 <span class="comment">%      end</span>
0070      
0071   <span class="keyword">else</span>
0072     error(<span class="string">'selectFeaturesBySelectionMap: Please check the dataset: &quot;type&quot; is not corretly defined!'</span>);
0073   <span class="keyword">end</span>
0074   
0075 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 22-Oct-2012 13:45:25 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>