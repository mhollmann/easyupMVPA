function [sp] = getSearchlightAdjacencyMatrix(dataset, searchlightDiameter)

if(dataset.is2D)
  warning('Searchlight functionality provided just for 4D-datasets at the moment!');
end

switch searchlightDiameter
    case 1
        sp = 1;
    case 3
        
        sp = zeros(3,3,3,'uint8');
      
        sp(:,:,1) =[0     0     0
                    0     1     0
                    0     0     0];
        
        
        sp(:,:,2) =[0     1     0
                    1     1     1
                    0     1     0];
        
        
        sp(:,:,3) =[0     0     0
                    0     1     0
                    0     0     0];
    case 5
        sp(:,:,1) = [     0     0     0     0     0
            0     0     1     0     0
            0     1     1     1     0
            0     0     1     0     0
            0     0     0     0     0];
        
        
        sp(:,:,2) = [     0     0     1     0     0
            0     1     1     1     0
            1     1     1     1     1
            0     1     1     1     0
            0     0     1     0     0];
        
        
        sp(:,:,3) =[     0     1     1     1     0
            1     1     1     1     1
            1     1     1     1     1
            1     1     1     1     1
            0     1     1     1     0];
        
        
        sp(:,:,4) =[    0     0     1     0     0
            0     1     1     1     0
            1     1     1     1     1
            0     1     1     1     0
            0     0     1     0     0];
        
        
        sp(:,:,5) =    [ 0     0     0     0     0
            0     0     1     0     0
            0     1     1     1     0
            0     0     1     0     0
            0     0     0     0     0];
        
        
        
    case 7
        sp(:,:,1) =[     0     0     0     0     0     0     0
            0     0     0     0     0     0     0
            0     0     1     1     1     0     0
            0     0     1     1     1     0     0
            0     0     1     1     1     0     0
            0     0     0     0     0     0     0
            0     0     0     0     0     0     0];
        
        
        sp(:,:,2) =[     0     0     0     0     0     0     0
            0     0     1     1     1     0     0
            0     1     1     1     1     1     0
            0     1     1     1     1     1     0
            0     1     1     1     1     1     0
            0     0     1     1     1     0     0
            0     0     0     0     0     0     0];
        
        
        sp(:,:,3) =[     0     0     1     1     1     0     0
            0     1     1     1     1     1     0
            1     1     1     1     1     1     1
            1     1     1     1     1     1     1
            1     1     1     1     1     1     1
            0     1     1     1     1     1     0
            0     0     1     1     1     0     0];
        
        
        sp(:,:,4) =[     0     0     1     1     1     0     0
            0     1     1     1     1     1     0
            1     1     1     1     1     1     1
            1     1     1     1     1     1     1
            1     1     1     1     1     1     1
            0     1     1     1     1     1     0
            0     0     1     1     1     0     0];
        
        
        sp(:,:,5) =[     0     0     1     1     1     0     0
            0     1     1     1     1     1     0
            1     1     1     1     1     1     1
            1     1     1     1     1     1     1
            1     1     1     1     1     1     1
            0     1     1     1     1     1     0
            0     0     1     1     1     0     0];
        
        
        sp(:,:,6) =[     0     0     0     0     0     0     0
            0     0     1     1     1     0     0
            0     1     1     1     1     1     0
            0     1     1     1     1     1     0
            0     1     1     1     1     1     0
            0     0     1     1     1     0     0
            0     0     0     0     0     0     0];
        
        
        sp(:,:,7) =[  0     0     0     0     0     0     0
            0     0     0     0     0     0     0
            0     0     1     1     1     0     0
            0     0     1     1     1     0     0
            0     0     1     1     1     0     0
            0     0     0     0     0     0     0
            0     0     0     0     0     0     0];
        
        
    case 9
        sp(:,:,1) =[0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,2) =[ 0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,3) =[ 0     0     0     0     0     0     0     0     0
            0     0     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     0     0
            0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,4) =[ 0     0     0     1     1     1     0     0     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     0     0     1     1     1     0     0     0];
        
        
        sp(:,:,5) =[ 0     0     0     1     1     1     0     0     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     0     0     1     1     1     0     0     0];
        
        
        sp(:,:,6) =[0     0     0     1     1     1     0     0     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     0     0     1     1     1     0     0     0];
        
        
        sp(:,:,7) = [0     0     0     0     0     0     0     0     0
            0     0     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     0     0
            0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,8) =[0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,9) =[0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0];
        
    case 11
        sp(:,:,1) =[ 0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     1     0     0     0     0     0
            0     0     0     0     1     1     1     0     0     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     0     0     1     1     1     0     0     0     0
            0     0     0     0     0     1     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,2) =[0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,3) =[ 0     0     0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,4) =[ 0     0     0     0     0     1     0     0     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     0     0     1     0     0     0     0     0];
        
        
        sp(:,:,5) =[ 0     0     0     0     1     1     1     0     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     0     1     1     1     0     0     0     0];
        
        
        sp(:,:,6) =[0     0     0     1     1     1     1     1     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     1     1     1     1     1     0     0     0];
        
        
        sp(:,:,7) =[0     0     0     0     1     1     1     0     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            1     1     1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     0     1     1     1     0     0     0     0];
        
        
        sp(:,:,8) =[0     0     0     0     0     1     0     0     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            1     1     1     1     1     1     1     1     1     1     1
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     0     0     1     0     0     0     0     0];
        
        
        sp(:,:,9) =[0     0     0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     1     1     1     1     1     1     1     1     1     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,10) =[0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     1     1     1     1     1     1     1     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0];
        
        
        sp(:,:,11) =[0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     1     0     0     0     0     0
            0     0     0     0     1     1     1     0     0     0     0
            0     0     0     1     1     1     1     1     0     0     0
            0     0     0     0     1     1     1     0     0     0     0
            0     0     0     0     0     1     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0
            0     0     0     0     0     0     0     0     0     0     0  ];
    otherwise
        error('Invalid searchlight diameter. Try 1,3,5,7,9 or 11!');
end




